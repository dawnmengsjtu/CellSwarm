% ============================================================
% Supplementary Information
% ============================================================

\section*{Supplementary Information}

% Reset counters and add S prefix for supplementary numbering
\setcounter{figure}{0}
\setcounter{table}{0}
\renewcommand{\thefigure}{S\arabic{figure}}
\renewcommand{\thetable}{S\arabic{table}}

\subsection*{Supplementary Tables}

% ── Table S1 ──
\begin{table}[!ht]
\centering
\caption{\textbf{Cell-type proportions across 8 models (TNBC baseline).} Mean proportions from $n=5$ seeds per model. Real proportions from GSE176078 \citep{Wu2021}. All simulations: 500 initial cells, 30 steps.}
\label{tab:s1}
\small
\begin{tabular}{lcccccc}
\toprule
Model & Tumor & CD8$^+$ T & Macrophage & NK & Treg & B cell \\
\midrule
Real (GSE176078) & 0.401 & 0.135 & 0.168 & 0.082 & 0.068 & 0.146 \\
\midrule
DeepSeek     & 0.400 & 0.246 & 0.151 & 0.081 & 0.061 & 0.061 \\
GLM-4-Flash  & 0.367 & 0.253 & 0.169 & 0.084 & 0.063 & 0.063 \\
Qwen-Turbo   & 0.331 & 0.271 & 0.172 & 0.090 & 0.068 & 0.068 \\
Rules        & 0.372 & 0.251 & 0.167 & 0.084 & 0.063 & 0.063 \\
\midrule
Qwen-Plus    & 0.215 & 0.320 & 0.200 & 0.106 & 0.080 & 0.080 \\
Qwen-Max     & 0.214 & 0.317 & 0.209 & 0.104 & 0.078 & 0.078 \\
Kimi-K2.5    & 0.658 & 0.137 & 0.091 & 0.046 & 0.034 & 0.034 \\
\midrule
Random       & 0.569 & 0.004 & 0.176 & 0.087 & 0.061 & 0.103 \\
\bottomrule
\end{tabular}
\end{table}

% ── Table S2 ──
\begin{table}[!ht]
\centering
\caption{\textbf{Cross-cancer immune features (Agent mode, DeepSeek).} Mean values from $n=3$ seeds per cancer type. Classification based on CD8$^+$/Treg ratio and literature consensus.}
\label{tab:s2}
\small
\begin{tabular}{lcccccc}
\toprule
Cancer Type & Tumor Ratio & CD8/Treg & CD8$^+$\% & NK\% & Mac\% & Class \\
\midrule
CRC-MSI-H & 0.074 & 4.65 & 40.0 & 7.9 & 17.7 & Hot \\
TNBC       & 0.929 & 4.00 & 24.7 & 8.2 & 15.9 & Hot \\
Melanoma   & 0.142 & 3.80 & 36.2 & 9.1 & 16.8 & Hot \\
NSCLC      & 0.385 & 2.50 & 28.4 & 6.5 & 19.2 & Excluded \\
Ovarian    & 0.621 & 1.80 & 22.1 & 5.8 & 18.5 & Cold \\
CRC-MSS    & 0.847 & 1.00 & 15.3 & 4.2 & 20.1 & Cold \\
\bottomrule
\end{tabular}
\end{table}

% ── Table S3 ──
\begin{table}[!ht]
\centering
\caption{\textbf{Complete treatment results.} Tumor ratio (final/initial) for 3 drugs $\times$ 2 timings $\times$ 2 modes. $n=3$ seeds each. Includes anti-TGF$\beta$ data excluded from main text due to 16$\times$ clinical mismatch.}
\label{tab:s3}
\small
\begin{tabular}{llcccc}
\toprule
Drug & Timing & Agent TR & Rules TR & Agent $\Delta$ & Rules $\Delta$ \\
\midrule
anti-PD1   & Early & 0.777 & 0.731 & $-$16.4\% & $-$14.1\% \\
anti-PD1   & Late  & 0.834 & 0.757 & $-$10.2\% & $-$11.1\% \\
anti-CTLA4 & Early & 0.912 & 0.764 & $-$1.8\%  & $-$10.2\% \\
anti-CTLA4 & Late  & 0.904 & 0.777 & $-$2.7\%  & $-$8.7\%  \\
\midrule
anti-TGF$\beta$ & Early & 0.176 & 0.115 & $-$81.1\% & $-$86.5\% \\
anti-TGF$\beta$ & Late  & 0.618 & 0.477 & $-$33.5\% & $-$43.9\% \\
\bottomrule
\end{tabular}
\end{table}

% ── Table S4 ──
\begin{table}[!ht]
\centering
\caption{\textbf{LLM API call statistics per 30-step, 500-cell simulation.} Tokens and runtime measured from single baseline runs. Cache hits reflect prompt-level caching across cells within a run.}
\label{tab:s4}
\small
\begin{tabular}{lrrrrc}
\toprule
Model & API Calls & Tokens & Errors & Runtime (s) & Cache Hits \\
\midrule
DeepSeek     & 3,036 & 2.81M & 0 & 1,231 & 408 \\
GLM-4-Flash  & 3,069 & 2.81M & 0 &   767 & 368 \\
Qwen-Turbo   & 3,005 & 2.98M & 0 &   490 & 308 \\
Qwen-Plus    & 2,972 & 3.02M & 0 &   820 & 181 \\
Qwen-Max     & 3,084 & 3.04M & 0 & 1,423 & 225 \\
Kimi-K2.5    & 3,232 & 3.20M & 0 & 2,956 & 920 \\
\midrule
Rules        & --- & --- & --- & $<$1 & --- \\
Random       & --- & --- & --- & $<$1 & --- \\
\bottomrule
\end{tabular}
\end{table}

\clearpage
\subsection*{Supplementary Figures}

% ── Figure S1 ──
\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{supplementary/figures/FigS1_individual_trajectories.pdf}
\caption{\textbf{Individual seed trajectories for all 8 models (baseline).} Each line represents one seed ($n=5$ per model). Tumor count over 30 simulation steps. Shaded region: $\pm$1 SD.}
\label{fig:s1}
\end{figure}

% ── Figure S2 ──
\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{supplementary/figures/FigS2_naive_baseline_crosscancer.pdf}
\caption{\textbf{Cross-cancer naive baseline comparison.} Rules-based tumor ratio across 6 cancer types is invariant (TR = 0.04--0.07), failing to distinguish immunologically hot (CRC-MSI-H) from cold (CRC-MSS) tumors. Agent shows cancer-type-specific responses.}
\label{fig:s2}
\end{figure}

% ── Figure S3 ──
\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{supplementary/figures/FigS3_anti_tgfb_complete.pdf}
\caption{\textbf{Anti-TGF$\beta$ treatment results.} Excluded from main text due to 16$\times$ mismatch between simulated ORR (60.3\%) and clinical ORR ($\sim$4\%). (\textbf{A})~Tumor ratio for Agent and Rules under early and late treatment. (\textbf{B})~Tumor count trajectories.}
\label{fig:s3}
\end{figure}

% ── Figure S4 ──
\begin{figure}[!ht]
\centering
\includegraphics[width=\textwidth]{supplementary/figures/FigS4_rules_ablation.pdf}
\caption{\textbf{Rules-based ablation experiment.} Removing drug library, pathway KB, or perturbation atlas from the Rules engine produces no change in JS divergence (0.146 $\rightarrow$ 0.146), confirming that Rules does not query knowledge bases. $n=1$ per condition.}
\label{fig:s4}
\end{figure}
